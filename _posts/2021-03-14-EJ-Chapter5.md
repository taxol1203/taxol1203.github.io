---
title: "Effective Java - Chapter 8"
last_modified_at: 2021-04-06 T12:19:00-05:00
toc: true
toc_sticky: true
header:
  teaser: /images/effective_Java.png
categories: 
  - Effective Java
tags:
---

> Effective Java

[Effective Java 3/E] 8장 메서드
=============
이번 장에서는  
1. 매개변수와 반환값 처리    
2. 메서드 시그니처 설계  
3. 문서화  
에 대해 다루어 본다.  
## Item 49 - 매개변수가 유효한지 검사하라  
메서드의 입력 매개변수가 특정 조건을 만족해야 할 시에, 검사를 가능한 빨리 하여 오류를 사전에 잡아야한다.  
매개 변수 검사에 실패하면 실패 원자성을 어기는 결과를 낳게 된다.  
따라서, 매개변수 제약을 문서화 하고, 이를 어기면 던지는 예외도 문서화를 해야한다.  

### 매개변수가 유효한지 확인하는 방법
1. 자바의 null 검사 기능 사용  
```java
public void someMethod(Integer val) {
    Integer integer = Objects.requireNonNull(val, "매개변수가 null!");
    System.out.println(integer);
}
```

2. Objects에 범위 검사 기능
리스트와 배열 전용으로 설계된 범위 검사 가능이다.  
`checkFromIndexSize`, `checkFromToIndex`, `checkIndex`을 사용한다.  
```java
List<String> list = List.of("a", "b", "c");
// Exception in thread "main" java.lang.IndexOutOfBoundsException: 
//      Index 4 out of bounds for length 3
Objects.checkIndex(4, list.size());
```

3. 단언문(`assert`) 사용
private로 공개되지 않은 메서드이면 `assert`를 사용하여 유효성을 검사한다.   
넘어온 매개변수가 조건식을 참으로 만들지 않으면 `AssertionError`를 던진다.  
```java
private void someMethod(int arr[], int length) {
    assert arr != null;
    assert length >= 0 && arr.length == length;

    // do something
}
```

### 매개변수 유효성 검사를 하지 않는 경우
유효성을 검사하는 비용이 지나치게 큰 경우 또는 계산 과정에서 암묵적으로 유효성 검사가 진행될 때는 유효성 검사를 건너 뛸 수도 있다.  
예를 들어 `Collections.sort(List)`처럼 리스트를 정렬할 때는 정렬 과정에서 모든 객체가 상호 비교된다.  
만일 비교할 수 없는 타입의 객체가 있으면 `ClassCastException`이 발생할 것이기 때문에 비교하기에 앞서 모든 원소를 검증하는 것은 불필요한 과정이 된다.  

## Item 50 - 적시에 방어적 복사본을 만들라










## 출처
Joshua Bloch. Effective Java 3/E. n.p.: 인사이트, 2018년 11월 1일.  

## Reference

<!-- ★
<img src="/images/Tech/EJ/문제번호.PNG" width="40%" height="40%">  

-->